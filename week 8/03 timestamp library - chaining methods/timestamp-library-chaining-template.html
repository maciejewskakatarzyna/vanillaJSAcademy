<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Constructor Library - Chaining</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<style type="text/css">
			body {
				margin: 0 auto;
				max-width: 40em;
				width: 88%;
			}
		</style>
	</head>
	<body>

		<h1>Constructor Library - Chaining</h1>

		<p>All of the fun here happens in the console.</p>


		<script>
			let Stamp = (function () {

				// Times in milliseconds
				let times = {
					hours: 1000 * 60 * 60,
					days: 1000 * 60 * 60 * 24,
					weeks: 1000 * 60 * 60 * 24 * 7,
					months: 1000 * 60 * 60 * 24 * 30,
					years: 1000 * 60 * 60 * 24 * 365
				};

				/**
				 * The constructor object
				 * @param {Integer|String|Date} date The date to use for this timestamp
				 */
				function Constructor (date) {
					this.timestamp = date ? new Date(date).getTime() : new Date().getTime();
				}

				/**
				 * Add hours to a timestamp
				 * @param  {Number}  n The number of hours to add
				 * @return {Integer}   The new timestamp
				 */
				Constructor.prototype.addHours = function (n = 1) {
					return this.timestamp + (n * times.hours);
				};

				/**
				 * Add days to a timestamp
				 * @param  {Number}  n The number of days to add
				 * @return {Integer}   The new timestamp
				 */
				Constructor.prototype.addDays = function (n = 1) {
					return this.timestamp + (n * times.days);
				};

				/**
				 * Add weeks to a timestamp
				 * @param  {Number}  n The number of weeks to add
				 * @return {Integer}   The new timestamp
				 */
				Constructor.prototype.addWeeks = function (n = 1) {
					return this.timestamp + (n * times.weeks);
				};

				/**
				 * Add months to a timestamp
				 * @param  {Number}  n The number of months to add
				 * @return {Integer}   The new timestamp
				 */
				Constructor.prototype.addMonths = function (n = 1) {
					return this.timestamp + (n * times.months);
				};

				/**
				 * Add years to a timestamp
				 * @param  {Number}  n The number of years to add
				 * @return {Integer}   The new timestamp
				 */
				Constructor.prototype.addYears = function (n = 1) {
					return this.timestamp + (n * times.years);
				};

				/**
				 * Get a formatted date for a timestamp
				 * @param  {Object}  options The formatting options
				 * @return {Date}            The date object
				 */
				Constructor.prototype.getDate = function (options = {}) {

					// Get formatting options
					let format = Object.assign({
						dateStyle: 'long',
						timeStyle: 'short',
						hour12: true
					}, options);

					// Format the timestamp
					return new Date(this.timestamp).toLocaleString(navigator.language, format);

				};

				return Constructor;

			})();

			// Create a new Stamp() instance for right now
			let now = new Stamp();
		</script>
	</body>
</html>